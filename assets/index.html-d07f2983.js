import"./modulepreload-polyfill-3cfb730f.js";const r=document.getElementById("panel"),w=document.getElementById("content"),i=document.getElementById("viewer"),a=document.getElementById("filterInput"),E=document.getElementById("clearSearchButton"),k=document.getElementById("expandButton"),f=document.getElementById("button"),x=document.getElementById("panelScrim"),B=document.getElementById("previewsToggler"),m=document.querySelector("#sections > a"),$=m.href,u={},h=new Map,g=document.createElement("div");let d=null;b();async function b(){w.appendChild(g),f.style.display="none";const e=await(await fetch("./files.json")).json(),n=await(await fetch("./tags.json")).json();for(const t in e){const o=e[t],c=document.createElement("h2");c.textContent=t,c.setAttribute("data-category",t),g.appendChild(c);for(let l=0;l<o.length;l++){const s=o[l];if(s){h.set(s,`src/webgpu/${s}/index.html`);const y=I(s,n[s]);g.appendChild(y),u[s]=y}}}if(window.location.hash!==""){const t=window.location.hash.substring(1);h.has(t)===!0&&(v(t),i.src=h.get(t),i.style.display="unset")}i.src===""&&(i.srcdoc=document.getElementById("PlaceholderHTML").innerHTML,i.style.display="unset"),a.value=q(),a.value!==""?(r.classList.add("searchFocused"),p(e,n)):L(""),a.onfocus=function(){r.classList.add("searchFocused")},a.onblur=function(){a.value===""&&r.classList.remove("searchFocused")},E.onclick=function(){a.value="",p(e,n),a.focus()},a.addEventListener("input",function(){p(e,n)}),k.addEventListener("click",function(t){t.preventDefault(),r.classList.toggle("open")}),x.onclick=function(t){t.preventDefault(),r.classList.toggle("open")},B.onclick=function(t){t.preventDefault(),w.classList.toggle("minimal")},/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(i.style.width=getComputedStyle(i).width,i.style.height=getComputedStyle(i).height,i.setAttribute("scrolling","no"))}function I(e,n){const t=Array.isArray(n)&&n.includes("external")?' <span class="tag">external</span>':"",o=`
				<div class="card">
					<a href="${h.get(e)}" target="viewer">
						<div class="cover">
							<img src="screenshots/${e}.jpg" loading="lazy" width="400" />
						</div>
						<div class="title">${e}${t}</div>
					</a>
				</div>
			`,c=F(o);return c.querySelector('a[target="viewer"]').addEventListener("click",function(s){s.button!==0||s.ctrlKey||s.altKey||s.metaKey||v(e)}),c}function v(e){d!==null&&u[d].classList.remove("selected"),u[e].classList.add("selected"),window.location.hash=e,i.focus(),i.style.display="unset",r.classList.remove("open"),d=e,f.style.display="",f.href=`https://github.com/feng3d-labs/webgpu/tree/master/examples/src/webgpu/${d}/index.ts`,f.title=`View source code for ${d} on GitHub`}function S(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(e,n){let t=a.value.trim();t=t.replace(/\s+/gi," "),t!==""?window.history.replaceState({},"",`?q=${t}${window.location.hash}`):window.history.replaceState({},"",window.location.pathname+window.location.hash);const o=new RegExp(S(t),"gi");for(const c in e){const l=e[c];for(let s=0;s<l.length;s++)C(l[s],o,n)}j(e),L(t)}function L(e){if(e){const n=m.href.split(/[?#]/)[0];m.href=`${n}?q=${e}`}else m.href=$}function C(e,n,t){const o=u[e];if(!o)return;e in t&&(e+=` ${t[e].join(" ")}`);const c=e.replace(/_+/g," ").match(n);c&&c.length>0?o.classList.remove("hidden"):o.classList.add("hidden")}function j(e){for(const n in e){let t=!0;const o=e[n];for(let l=0;l<o.length;l++){const s=o[l];if(u[s].classList.contains("hidden")===!1){t=!1;break}}const c=document.querySelector(`h2[data-category="${n}"]`);t?c.classList.add("hidden"):c.classList.remove("hidden")}}function q(){const e=window.location.search;return e.indexOf("?q=")!==-1?decodeURI(e.slice(3)):""}function F(e){const n=document.createElement("div");return n.innerHTML=e.trim(),n.firstChild}
