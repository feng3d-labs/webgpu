import"../../../modulepreload-polyfill-3cfb730f.js";import{m as e,v as r}from"../../../wgpu-matrix.module-82499b8f.js";import{W,r as h}from"../../../Buffer-23ffa079.js";import{a as V,b as B,d as M,e as R,c as U}from"../../../cube-9c7624af.js";import{b as _}from"../../../basic.vert-5cd75182.js";import{v as z}from"../../../vertexPositionColor.frag-aa0bc14e.js";const D=async t=>{const s=window.devicePixelRatio||1;t.width=t.clientWidth*s,t.height=t.clientHeight*s;const y=await new W().init(),P={colorAttachments:[{view:{texture:{context:{canvasId:t.id}}},clearValue:[.5,.5,.5,1]}],depthStencilAttachment:{depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store"}},n=4*16,c=256,v=c+n,m=new ArrayBuffer(v),u={bufferView:new Uint8Array(m,0,n),modelViewProjectionMatrix:null},l={pipeline:{vertex:{code:_},fragment:{code:z},primitive:{cullFace:"back"}},bindingResources:{uniforms:u},vertices:{position:{data:V,format:"float32x4",offset:B,arrayStride:M},uv:{data:V,format:"float32x2",offset:R,arrayStride:M}},draw:{__type__:"DrawVertex",vertexCount:U}},d={bufferView:new Uint8Array(m,c,n),modelViewProjectionMatrix:null},g={...l,bindingResources:{uniforms:d}},j=t.width/t.height,f=e.perspective(2*Math.PI/5,j,1,100),S=e.translation(r.create(-2,0,0)),A=e.translation(r.create(2,0,0)),o=e.create(),i=e.create(),p=e.translation(r.fromValues(0,0,-7)),w=e.create(),x=e.create();function O(){const a=Date.now()/1e3;e.rotate(S,r.fromValues(Math.sin(a),Math.cos(a),0),1,w),e.rotate(A,r.fromValues(Math.cos(a),Math.sin(a),0),1,x),e.multiply(p,w,o),e.multiply(f,o,o),e.multiply(p,x,i),e.multiply(f,i,i)}const C={commandEncoders:[{passEncoders:[{descriptor:P,renderPassObjects:[l,g]}]}]};function b(){O(),h(u).modelViewProjectionMatrix=o.subarray(),h(d).modelViewProjectionMatrix=i.subarray(),y.submit(C),requestAnimationFrame(b)}requestAnimationFrame(b)},E=document.getElementById("webgpu");D(E);
